---
kind: pipeline
name: default

steps:
- name: backend
  image: golang:1.13-alpine
  environment:
    USERNAME:
      from_secret: username
  commands:
  - go build
  - go test
  - echo $USERNAME
  - echo $USERNAME > a.txt
  - cat a.txt
- name: publish  
  image: plugins/docker
  settings:
    access_key:
      from_secret: u_docker
    secret_key:
      from_secret: p_docker
    repo: luisredda/gohello
